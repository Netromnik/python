{% load news_tags str_utils date_tags comments_tags thumbnail utils_tags pytils_numeral %}

{% if materials %}
    <div class="article__similar article__similar_desktop">
        <ul class="grid-list"{% if list_id %} id="{{ list_id }}"{% endif %}{% if list_data %} {{ list_data }}{% endif %}>
            {% for article in materials %}
                {% if forloop.counter == 1 or forloop.counter == 2 or forloop.counter == 4 %}
                    <li class="grid-list__item{% if forloop.counter == 2 %} grid-list__item_100{% endif %} longread-{{ forloop.counter }}" data-similarity-way="{{ article.way }}">
                        {% material_card article is_double=True is_wide=True metrika_goal=metrika_goal audit_goal=audit_goal audit_material=audit_material %}
                    </li>
                {% else %}
                    <li class="grid-list__item longread-{{ forloop.counter }}" data-similarity-way="{{ article.way }}">
                        {% material_card article is_light=True is_wide=True metrika_goal=metrika_goal audit_goal=audit_goal audit_material=audit_material %}
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    </div>

    {# на мобиле показывать другие карточки #}
    {% if request.user_agent.is_gadget %}
        <div class="news-materials article__similar article__similar_mobile">
            <ul class="news-materials__list"{% if list_id %} id="{{ list_id }}"{% endif %}{% if list_data %} {{ list_data }}{% endif %}>
                {% for article in materials %}
                    <li class="news-materials__list__item negative-margin-15 longread-{{ forloop.counter }}" data-similarity-way="{{ article.way }}">
                        {% material_card article is_mobile=True is_wide=True metrika_goal=metrika_goal audit_goal=audit_goal audit_material=audit_material %}
                    </li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
{% endif %}
